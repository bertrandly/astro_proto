---
import { getSession } from "auth-astro/server";

let session = await getSession(Astro.request);
if (!session) {
  return Astro.redirect("/login");
}
---
<div>
  <h1>Protected Page</h1>
  <p>Hi {{session.user.name}, only logged in users can see this page</p>
</div>
